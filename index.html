<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 기반 팜스코 영업 전문가 성장 프로그램</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --farmsco-red: #D7282F;
            --farmsco-dark-red: #b92228;
            --gray-900: #212529;
            --gray-700: #495057;
            --gray-500: #adb5bd;
            --gray-300: #dee2e6;
            --gray-100: #f8f9fa;
        }
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--gray-100);
            color: var(--gray-900);
        }
        .slide {
            background-color: white;
            border-radius: 0.75rem;
            border: 1px solid var(--gray-300);
            box-shadow: 0 8px 16px rgba(0,0,0,0.05);
            padding: 2.5rem 3rem;
            display: none; /* Initially hide all slides */
            flex-direction: column;
            justify-content: center;
            min-height: 700px;
        }
        .slide.active {
            display: flex;
        }
        .gemini-button {
            background-color: var(--farmsco-red);
            color: white;
            font-weight: 700;
            padding: 0.85rem 1.5rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(215, 40, 47, 0.2);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .gemini-button:hover {
            background-color: var(--farmsco-dark-red);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(215, 40, 47, 0.25);
        }
        .gemini-button.secondary {
            background-color: var(--gray-700);
            box-shadow: 0 4px 6px rgba(0,0,0, 0.1);
        }
        .gemini-button.secondary:hover {
            background-color: var(--gray-900);
            box-shadow: 0 6px 12px rgba(0,0,0, 0.15);
        }
        .gemini-button svg {
            margin-right: 0.5rem;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: var(--farmsco-red);
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        label {
            font-weight: 700;
            color: var(--gray-900);
            font-size: 0.95rem;
        }
        input, textarea, select {
            width: 100%;
            padding: 0.85rem;
            margin-top: 0.5rem;
            border: 1px solid var(--gray-300);
            border-radius: 0.5rem;
            font-size: 0.9rem;
            color: var(--gray-700);
            transition: all 0.2s ease;
            background-color: #fff;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--farmsco-red);
            box-shadow: 0 0 0 4px rgba(215, 40, 47, 0.1);
        }
        .module-header {
            color: var(--farmsco-red);
            font-weight: 900;
        }
        .module-subtitle {
             color: var(--gray-700);
             font-weight: 500;
        }
        .stepper {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            padding: 0;
            list-style-type: none;
        }
        .step {
            display: flex;
            align-items: center;
            flex-grow: 1;
            color: var(--gray-500);
            transition: all 0.3s ease;
        }
        .step:not(:last-child) {
            flex-basis: 0;
        }
        .step-number {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            border: 2px solid var(--gray-300);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 0.75rem;
            background-color: white;
            transition: all 0.3s ease;
        }
        .step-title {
            font-weight: 700;
        }
        .step.active .step-number {
            background-color: var(--farmsco-red);
            color: white;
            border-color: var(--farmsco-red);
        }
         .step.active .step-title {
            color: var(--farmsco-red);
        }
        .step-line {
            flex-grow: 1;
            height: 2px;
            background-color: var(--gray-300);
            margin: 0 1rem;
        }
         .load-result-button {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--farmsco-red);
            background: none;
            border: none;
            cursor: pointer;
            text-align: right;
            margin-top: 0.5rem;
            display: block;
            width: 100%;
        }
        .load-result-button:hover {
            text-decoration: underline;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            #report-output, #report-output * {
                visibility: visible;
            }
            #report-output {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            .slide, header, footer, .stepper, #prev-btn, #next-btn {
                display: none !important;
            }
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="bg-white text-center py-6 px-4 shadow-sm">
        <h1 class="text-3xl md:text-4xl font-black text-[#D7282F]">AI 기반 팜스코 영업 전문가 성장 프로그램</h1>
        <p class="text-md md:text-lg text-gray-600 mt-2">데이터 기반의 전략적 영업 역량 강화 솔루션</p>
    </header>

    <main class="container mx-auto p-4 md:p-8 max-w-6xl">

        <!-- Stepper -->
        <ol id="stepper" class="stepper">
            <li class="step active" data-step="0"><div class="step-number">1</div><span class="step-title">페르소나</span><div class="step-line"></div></li>
            <li class="step" data-step="1"><div class="step-number">2</div><span class="step-title">전략</span><div class="step-line"></div></li>
            <li class="step" data-step="2"><div class="step-number">3</div><span class="step-title">프로세스</span><div class="step-line"></div></li>
            <li class="step" data-step="3"><div class="step-number">4</div><span class="step-title">시나리오</span><div class="step-line"></div></li>
            <li class="step" data-step="4"><div class="step-number">5</div><span class="step-title">SWOT</span><div class="step-line"></div></li>
            <li class="step" data-step="5"><div class="step-number">6</div><span class="step-title">스크립트</span><div class="step-line"></div></li>
            <li class="step" data-step="6"><div class="step-number">7</div><span class="step-title">리포트</span></li>
        </ol>


        <div id="slideshow-container" class="relative">
            <button id="prev-btn" class="absolute top-1/2 -left-4 md:-left-16 transform -translate-y-1/2 bg-white/80 hover:bg-white focus:outline-none shadow-lg rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold text-gray-700 z-10 transition-all">❮</button>
            <button id="next-btn" class="absolute top-1/2 -right-4 md:-right-16 transform -translate-y-1/2 bg-white/80 hover:bg-white focus:outline-none shadow-lg rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold text-gray-700 z-10 transition-all">❯</button>

            <!-- Module 1: 고객 페르소나 만들기 -->
            <div class="slide active">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M1: 고객 페르소나 만들기</h2>
                    <span class="font-bold text-gray-400">Page 1 / 7</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">👤 핵심 고객 페르소나 정의</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">공략하고자 하는 핵심 고객의 특징을 구체적으로 입력하여 AI 페르소나 분석 리포트를 생성함.</p>
                    <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="m1-persona-name">1. 페르소나 이름</label>
                                <input type="text" id="m1-persona-name" placeholder="예: 데이터 기반 젊은 농장주">
                            </div>
                            <div>
                                <label for="m1-demographics">2. 인구통계학적 정보</label>
                                <input type="text" id="m1-demographics" placeholder="예: 30대 후반, 경기도 거주">
                            </div>
                        </div>
                        <div>
                            <label for="m1-farm-info">3. 농장 정보 (축종 및 규모)</label>
                            <input type="text" id="m1-farm-info" placeholder="예: 한우 번식우, 150두 규모">
                        </div>
                        <div>
                            <label for="m1-personality">4. 성격 및 가치관</label>
                            <input type="text" id="m1-personality" placeholder="예: 신중하고 분석적, 새로운 기술 수용에 개방적">
                        </div>
                        <div>
                            <label for="m1-goals">5. 주요 목표</label>
                            <textarea id="m1-goals" rows="2" placeholder="예: 생산성 10% 향상, 스마트팜 시스템 도입, 직거래 판로 개척"></textarea>
                        </div>
                        <div>
                            <label for="m1-challenges">6. 주요 어려움 (Pain Points)</label>
                             <textarea id="m1-challenges" rows="2" placeholder="예: 사료비 부담, 최신 기술 정보 부족, 인력난"></textarea>
                        </div>
                         <div>
                            <label for="m1-info-sources">7. 정보 습득 채널</label>
                            <input type="text" id="m1-info-sources" placeholder="예: 축산 전문 유튜브 채널, 온라인 커뮤니티, 지역 기술센터">
                        </div>
                        <button id="persona-generator-btn" class="gemini-button w-full mt-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10c0-4.42-3.58-8-8-8a10 10 0 0 0 0 20Z"/><path d="M12 18a10 10 0 0 0 5-8.5c0-2.5-2.5-4.5-5-4.5s-5 2-5 4.5c0 5 5 8.5 5 8.5Z"/><circle cx="12" cy="10" r="1"/></svg>
                            AI 페르소나 리포트 생성
                        </button>
                    </div>
                </div>
            </div>

            <!-- Module 2: 영업 전략 수립 -->
            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M2: 영업 전략 수립</h2>
                    <span class="font-bold text-gray-400">Page 2 / 7</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">🎯 팜스코 맞춤형 영업 전략 방향 설정</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">M1의 페르소나와 핵심 목표를 기반으로 시장을 선도할 AI 기반 영업 전략을 도출함.</p>
                    <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full space-y-4">
                         <div>
                            <label for="m2-persona-input">1. M1에서 생성된 페르소나 리포트</label>
                            <button class="load-result-button" data-target="m2-persona-input" data-source="m1">결과 불러오기</button>
                            <textarea id="m2-persona-input" rows="5" placeholder="M1의 AI 생성 결과를 여기에 붙여넣거나 '결과 불러오기'를 클릭하세요."></textarea>
                        </div>
                        <div>
                            <label for="m2-sales-goal">2. 분기 핵심 목표 (SMART 원칙 기반)</label>
                            <input type="text" id="m2-sales-goal" placeholder="예: 신규 농가 5곳 확보, 농가당 월 평균 사료 판매량 10% 증대">
                        </div>
                        <div>
                            <label for="m2-key-products">3. 주력 제품 및 서비스</label>
                            <input type="text" id="m2-key-products" placeholder="예: 팜스원 한우 시리즈, ICT 기반 컨설팅 서비스">
                        </div>
                        <div>
                            <label for="m2-product-features">4. 제품/솔루션의 핵심 특징 및 고객 혜택</label>
                             <textarea id="m2-product-features" rows="3" placeholder="예: 한우 고급육질 개선 특화 성분 함유, 데이터 기반 개체별 사양관리 프로그램 제공으로 생산성 예측 가능"></textarea>
                        </div>
                        <button id="strategy-generator-btn" class="gemini-button w-full mt-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                            AI 영업 전략 생성
                        </button>
                    </div>
                </div>
            </div>

            <!-- Module 3: 세일즈 프로세스 수립 -->
            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M3: 세일즈 프로세스 수립</h2>
                    <span class="font-bold text-gray-400">Page 3 / 7</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">⚙️ 전략 기반 세일즈 프로세스 설계</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">M2에서 도출된 영업 전략을 바탕으로, 실행 가능한 단계별 프로세스를 구축함.</p>
                    <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full space-y-4">
                        <div>
                            <label for="m3-strategy-input">1. M2에서 생성된 영업 전략</label>
                            <button class="load-result-button" data-target="m3-strategy-input" data-source="m2">결과 불러오기</button>
                            <textarea id="m3-strategy-input" rows="8" placeholder="M2의 AI 생성 결과를 여기에 붙여넣어 주세요."></textarea>
                        </div>
                        <button id="process-generator-btn" class="gemini-button w-full mt-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20V16"/></svg>
                            AI 세일즈 프로세스 설계
                        </button>
                    </div>
                </div>
            </div>

            <!-- Module 4: 영업 시나리오 만들기 -->
            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M4: 영업 시나리오 만들기</h2>
                    <span class="font-bold text-gray-400">Page 4 / 7</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">📰 상황 맞춤형 영업 시나리오 개발</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">M1~M3 분석 결과와 최신 축산 동향을 종합하여 현실적인 영업 시나리오를 구성함.</p>
                     <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full space-y-4">
                        <div>
                            <label for="m4-context-input">1. M1~M3 핵심 결과 요약</label>
                            <button class="load-result-button" data-target="m4-context-input" data-source="m1,m2,m3">결과 불러오기</button>
                            <textarea id="m4-context-input" rows="8" placeholder="페르소나, 전략, 프로세스 요약을 붙여넣거나 '결과 불러오기'를 클릭하세요."></textarea>
                        </div>
                         <div>
                            <label for="m4-news-query">2. AI에게 질문할 핵심 뉴스 주제</label>
                            <input type="text" id="m4-news-query" placeholder="예: 최근 한우 가격 동향, 국제 곡물가 변동, 축산 관련 정부 정책">
                        </div>
                        <button id="scenario-generator-btn" class="gemini-button w-full mt-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                            AI 최신 뉴스 연계 시나리오 생성
                        </button>
                    </div>
                </div>
            </div>

            <!-- Module 5: 경쟁사 대비 SWOT 분석 -->
            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M5: 경쟁사 대비 SWOT 분석</h2>
                    <span class="font-bold text-gray-400">Page 5 / 7</span>
                </div>
                 <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">📊 거시 환경 분석 기반 SWOT 및 과제 도출</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">AI가 외부 환경(정책, 경제, 사회, 기술)을 분석하여 기회/위협 요소를 도출하고, 이를 내부 역량과 결합하여 우선 과제를 선별함.</p>
                     <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full space-y-4">
                         <div>
                            <label for="m5-context-input">1. M1~M4 핵심 결과 요약</label>
                            <button class="load-result-button" data-target="m5-context-input" data-source="m1,m2,m3,m4">결과 불러오기</button>
                            <textarea id="m5-context-input" rows="6" placeholder="이전 단계들의 요약본을 붙여넣어 주세요."></textarea>
                        </div>
                        <div>
                            <label for="m5-competitor-name">2. 핵심 경쟁사명 (복수 입력 가능)</label>
                            <input type="text" id="m5-competitor-name" placeholder="예: 우성사료, 대한사료">
                        </div>
                         <div>
                            <label for="m5-farmsco-strength">3. 경쟁사 대비 팜스코 강점</label>
                            <input type="text" id="m5-farmsco-strength" placeholder="예: 높은 브랜드 인지도, 전국적인 유통망, ICT 기술력">
                        </div>
                         <div>
                            <label for="m5-farmsco-weakness">4. 경쟁사 대비 팜스코 약점</label>
                            <input type="text" id="m5-farmsco-weakness" placeholder="예: 고가 제품 라인업, 젊은 층 대상 마케팅 부족">
                        </div>
                        <button id="swot-generator-btn" class="gemini-button w-full mt-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
                            AI 외부 환경 분석 및 SWOT 과제 도출
                        </button>
                    </div>
                </div>
            </div>

            <!-- Module 6: SPIN 셀링 스크립트 -->
            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M6: SPIN 셀링 스크립트</h2>
                    <span class="font-bold text-gray-400">Page 6 / 7</span>
                </div>
                <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">🗣️ 최종 종합, 실전 상담 스크립트 생성</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">1~5번 모듈의 결과물을 종합하여, 고객과의 상담을 성공으로 이끌 SPIN 셀링 스크립트를 완성함.</p>
                    <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full space-y-4">
                        <div>
                            <label for="m6-summary-input">1. M1~M5 핵심 결과 요약</label>
                             <button class="load-result-button" data-target="m6-summary-input" data-source="m1,m2,m3,m4,m5">모든 결과 종합하기</button>
                            <textarea id="m6-summary-input" rows="10" placeholder="이전 모듈들에서 AI가 생성해준 결과의 핵심 내용을 여기에 모두 붙여넣어 주세요."></textarea>
                        </div>
                        <button id="spin-script-generator-btn" class="gemini-button w-full mt-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                            AI SPIN 셀링 스크립트 생성
                        </button>
                        <div class="mt-6 pt-6 border-t">
                            <label for="m6-objection-input">2. 거절/반론 극복 시나리오</label>
                             <input type="text" id="m6-objection-input" placeholder="스크립트 진행 중 예상되는 고객의 거절/반론을 입력하세요. (예: 가격이 너무 비싸네요)">
                             <button id="objection-handler-btn" class="gemini-button secondary w-full mt-4">
                                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>
                                 AI 거절 극복 답변 생성
                             </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Module 7: 종합 리포트 -->
            <div class="slide">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold module-header">M7: 종합 리포트</h2>
                    <span class="font-bold text-gray-400">Page 7 / 7</span>
                </div>
                 <div class="flex-grow flex flex-col justify-center">
                    <h3 class="text-xl font-bold mb-4 text-center module-subtitle">🗂️ AI 분석 종합 대시보드</h3>
                    <p class="text-sm text-gray-600 mb-8 text-center">모든 단계의 AI 분석 결과를 한 곳에서 확인하고 관리함.</p>
                     <div class="bg-gray-50 border border-gray-200 rounded-xl p-8 w-full">
                        <div class="flex space-x-4">
                            <button id="report-generator-btn" class="gemini-button w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-4M17 9l-5 5-5-5M12 14V3"/></svg>
                                종합 리포트 생성하기
                            </button>
                             <button id="print-report-btn" class="gemini-button secondary w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9V2h12v7"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><path d="M6 14h12v8H6z"/></svg>
                                리포트 인쇄하기
                            </button>
                        </div>
                        <div id="report-output" class="mt-6 space-y-6 hidden">
                             <!-- Report Sections -->
                             <div>
                                <h4 class="font-bold text-lg text-gray-800 border-b pb-2 mb-3">M1: 고객 페르소나</h4>
                                <div id="report-m1" class="text-sm p-4 bg-white rounded-md border text-gray-600 h-24 overflow-y-auto whitespace-pre-wrap"></div>
                             </div>
                             <div>
                                <h4 class="font-bold text-lg text-gray-800 border-b pb-2 mb-3">M2: 영업 전략</h4>
                                <div id="report-m2" class="text-sm p-4 bg-white rounded-md border text-gray-600 h-24 overflow-y-auto whitespace-pre-wrap"></div>
                             </div>
                              <div>
                                <h4 class="font-bold text-lg text-gray-800 border-b pb-2 mb-3">M3: 세일즈 프로세스</h4>
                                <div id="report-m3" class="text-sm p-4 bg-white rounded-md border text-gray-600 h-24 overflow-y-auto whitespace-pre-wrap"></div>
                             </div>
                              <div>
                                <h4 class="font-bold text-lg text-gray-800 border-b pb-2 mb-3">M4: 영업 시나리오</h4>
                                <div id="report-m4" class="text-sm p-4 bg-white rounded-md border text-gray-600 h-24 overflow-y-auto whitespace-pre-wrap"></div>
                             </div>
                              <div>
                                <h4 class="font-bold text-lg text-gray-800 border-b pb-2 mb-3">M5: SWOT 분석</h4>
                                <div id="report-m5" class="text-sm p-4 bg-white rounded-md border text-gray-600 h-24 overflow-y-auto whitespace-pre-wrap"></div>
                             </div>
                             <div>
                                <h4 class="font-bold text-lg text-gray-800 border-b pb-2 mb-3">M6: SPIN 스크립트</h4>
                                <div id="report-m6" class="text-sm p-4 bg-white rounded-md border text-gray-600 h-24 overflow-y-auto whitespace-pre-wrap"></div>
                             </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </main>

    <!-- Modal -->
    <div id="gemini-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex items-center justify-center p-4">
        <div class="relative mx-auto p-0 border-none w-full max-w-3xl shadow-xl rounded-xl bg-white transform transition-all duration-300 ease-out scale-95">
            <div class="mt-3">
                <div class="flex justify-between items-center p-6 border-b border-gray-200">
                    <h3 id="modal-title" class="text-xl leading-6 font-bold text-gray-900">AI 생성 결과</h3>
                    <button id="close-modal-button" class="text-gray-400 hover:text-gray-600 text-3xl font-light">&times;</button>
                </div>
                <div id="modal-content" class="p-8 max-h-[60vh] overflow-y-auto">
                    <div id="modal-loader" class="flex justify-center items-center py-10">
                        <div class="spinner"></div>
                        <p class="ml-4 text-gray-600">AI가 분석 중입니다. 잠시만 기다려주세요.</p>
                    </div>
                    <div id="modal-text" class="text-base text-gray-700 whitespace-pre-wrap leading-relaxed"></div>
                </div>
                <div class="flex justify-end items-center px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl">
                    <span id="copy-success" class="text-sm text-green-600 mr-4 hidden">복사 완료!</span>
                    <button id="copy-button" class="bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors">본문 복사</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="bg-gray-800 text-white text-center py-5 px-4 mt-8">
        <p class="text-sm">&copy; 2025 Farmsco Sales Growth Program. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const steps = document.querySelectorAll('.step');
            let currentSlide = 0;
            const moduleResults = {}; 

            function updateStepper(index) {
                steps.forEach((step, i) => {
                    step.classList.toggle('active', i === index);
                });
            }

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                updateStepper(index);
            }

            nextBtn.addEventListener('click', () => {
                currentSlide = (currentSlide + 1) % slides.length;
                showSlide(currentSlide);
            });
            prevBtn.addEventListener('click', () => {
                currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                showSlide(currentSlide);
            });
            
            showSlide(currentSlide);

            const modal = document.getElementById('gemini-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalLoader = document.getElementById('modal-loader');
            const modalText = document.getElementById('modal-text');
            const closeModalButton = document.getElementById('close-modal-button');
            const copyButton = document.getElementById('copy-button');
            const copySuccessMessage = document.getElementById('copy-success');
            const modalContainer = modal.querySelector('.transform');

            const openModal = () => {
                modal.classList.remove('hidden');
                setTimeout(() => modalContainer.classList.add('scale-100'), 10);
            };
            const closeModal = () => {
                 modalContainer.classList.remove('scale-100');
                 setTimeout(() => modal.classList.add('hidden'), 300);
            };

            closeModalButton.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'gemini-modal') closeModal();
            });
            
            async function callGeminiAPI(prompt, useSearch = false) {
                 const apiKey = "AIzaSyB0GwdQwPzmHqOjLh42nyZg7-YNKs9Ama0";
                 const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                 const payload = { 
                     contents: [{ parts: [{ text: prompt }] }],
                 };
                 if (useSearch) {
                     payload.tools = [{ "google_search": {} }];
                 }

                 try {
                     const response = await fetch(apiUrl, {
                         method: 'POST',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify(payload)
                     });
                     if (!response.ok) throw new Error(`HTTP error status: ${response.status}`);
                     const result = await response.json();
                     
                     const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "결과 생성 실패";
                     let citations = [];
                     if (useSearch) {
                         const groundingMetadata = result.candidates?.[0]?.groundingMetadata;
                         if (groundingMetadata && groundingMetadata.groundingAttributions) {
                            citations = groundingMetadata.groundingAttributions.map(attr => ({
                                title: attr.web?.title,
                                url: attr.web?.uri,
                            })).filter(c => c.title && c.url);
                         }
                     }
                     return { text, citations };
                 } catch (error) {
                     console.error("API Call Error:", error);
                     return { text: "오류 발생. 잠시 후 다시 시도 바람." };
                 }
            }
            
            async function generateContent(prompt, title, moduleKey, useSearch = false) {
                modalTitle.textContent = title;
                modalText.innerHTML = '';
                modalLoader.style.display = 'flex';
                copySuccessMessage.classList.add('hidden');
                openModal();
                
                const { text, citations } = await callGeminiAPI(prompt, useSearch);
                
                modalLoader.style.display = 'none';
                moduleResults[moduleKey] = text;
                let finalHtml = text;

                if (useSearch && citations && citations.length > 0) {
                    let citationHtml = '<br><hr class="my-6 border-gray-200"><h4 class="font-bold text-lg mt-4 mb-3">참고한 전체 정보 출처</h4><ul class="list-disc pl-5 space-y-2">';
                    citations.forEach(c => {
                        citationHtml += `<li><a href="${c.url}" target="_blank" class="text-blue-600 hover:underline">${c.title}</a></li>`;
                    });
                    citationHtml += '</ul>';
                    finalHtml += citationHtml;
                }

                modalText.innerHTML = finalHtml.replace(/\n/g, '<br>');
            }

            copyButton.addEventListener('click', () => {
                const textToCopy = modalText.textContent;
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                textArea.style.position = 'fixed';
                textArea.style.top = '-9999px';
                textArea.style.left = '-9999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copySuccessMessage.classList.remove('hidden');
                    setTimeout(() => copySuccessMessage.classList.add('hidden'), 2000);
                } catch (err) {
                    console.error('Copy failed', err);
                }
                document.body.removeChild(textArea);
            });

            document.querySelectorAll('.load-result-button').forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.dataset.target;
                    const sourceKeys = button.dataset.source.split(',');
                    const targetEl = document.getElementById(targetId);

                    let combinedResults = "";
                    let missing = false;
                    sourceKeys.forEach(key => {
                        if (moduleResults[key]) {
                            combinedResults += `[${key.toUpperCase()} 결과]\n${moduleResults[key]}\n\n---\n\n`;
                        } else {
                             alert(`M${key.slice(1)}의 결과가 아직 생성되지 않았습니다.`);
                             combinedResults = ""; 
                             missing = true;
                        }
                    });
                    if (!missing) {
                       targetEl.value = combinedResults.trim();
                    }
                });
            });

            const basePromptInstruction = "당신은 팜스코의 최고 영업 전략가임. 모든 답변은 표가 아닌 개조식으로 작성할 것. 모든 문장은 '~함', '~체', 또는 명사형으로 간결하게 끝낼 것. **나 # 같은 마크다운 문자는 절대 사용하지 말 것.";

            // M1 Event Listener
            document.getElementById('persona-generator-btn').addEventListener('click', () => {
                const inputs = {
                    personaName: document.getElementById('m1-persona-name').value,
                    demographics: document.getElementById('m1-demographics').value,
                    farmInfo: document.getElementById('m1-farm-info').value,
                    personality: document.getElementById('m1-personality').value,
                    goals: document.getElementById('m1-goals').value,
                    challenges: document.getElementById('m1-challenges').value,
                    infoSources: document.getElementById('m1-info-sources').value
                };
                if (Object.values(inputs).some(val => !val)) {
                    alert("모든 항목을 입력해야 함."); return;
                }
                const prompt = `${basePromptInstruction}\n\n[입력 정보]\n- 페르소나 이름: ${inputs.personaName}\n- 인구통계: ${inputs.demographics}\n- 농장 정보: ${inputs.farmInfo}\n- 성격/가치관: ${inputs.personality}\n- 주요 목표: ${inputs.goals}\n- 주요 어려움: ${inputs.challenges}\n- 정보 채널: ${inputs.infoSources}\n\n[요청]\n위 정보를 바탕으로 팜스코의 핵심 고객 페르소나 리포트를 아래 항목에 맞춰 분석할 것.\n\n1.  **페르소나 요약**\n    - \n2.  **핵심 니즈 및 동기**\n    - \n3.  **주요 공략 포인트 (Key Attack Points)**\n    - \n4.  **효과적인 소통 방식**\n    - `;
                generateContent(prompt, 'AI 고객 페르소나 리포트', 'm1');
            });

            // M2 Event Listener
            document.getElementById('strategy-generator-btn').addEventListener('click', () => {
                const inputs = {
                    personaInput: document.getElementById('m2-persona-input').value,
                    salesGoal: document.getElementById('m2-sales-goal').value,
                    keyProducts: document.getElementById('m2-key-products').value,
                    productFeatures: document.getElementById('m2-product-features').value,
                };
                if (Object.values(inputs).some(val => !val)) {
                    alert("모든 항목을 입력해야 함."); return;
                }
                const prompt = `${basePromptInstruction}\n\n[입력 정보]\n- 고객 페르소나: ${inputs.personaInput}\n- 분기 목표: ${inputs.salesGoal}\n- 주력 제품: ${inputs.keyProducts}\n- 제품 특징/혜택: ${inputs.productFeatures}\n\n[요청]\n위 정보를 바탕으로 팜스코 맞춤형 영업 전략을 아래 항목에 맞춰 구체적으로 수립할 것.\n\n1.  **전략 목표**\n    - \n2.  **핵심 가치 제안(Value Proposition)**\n    -\n3.  **핵심 메시지**\n    - \n4.  **주요 접근 방식 (3가지)**\n    - \n    - \n    -`;
                generateContent(prompt, 'AI 영업 전략', 'm2');
            });

            // M3 Event Listener
            document.getElementById('process-generator-btn').addEventListener('click', () => {
                const strategy = document.getElementById('m3-strategy-input').value;
                if (!strategy) {
                    alert("M2의 전략을 먼저 입력해야 함."); return;
                }
                const prompt = `${basePromptInstruction}\n\n[입력 정보]\n- 영업 전략: ${strategy}\n\n[요청]\n위 영업 전략을 실행하기 위한 팜스코 세일즈 프로세스를 6단계로 나누어 각 단계별 핵심 활동을 정의할 것.\n\n1.  **잠재고객 발굴 (Prospecting)**\n    - \n2.  **접근 및 자격 평가 (Approach & Qualification)**\n    - \n3.  **니즈 분석 (Needs Analysis)**\n    - \n4.  **가치 제안 (Value Proposition)**\n    - \n5.  **계약 체결 (Closing)**\n    - \n6.  **고객 관리 및 확대 (Follow-up & Expansion)**\n    - `;
                generateContent(prompt, 'AI 세일즈 프로세스', 'm3');
            });
            
            // M4 Event Listener
            document.getElementById('scenario-generator-btn').addEventListener('click', () => {
                const context = document.getElementById('m4-context-input').value;
                const query = document.getElementById('m4-news-query').value;
                if (!context || !query) {
                    alert("모든 항목을 입력해야 함.");
                    return;
                }
                const prompt = `${basePromptInstruction}

[매우 중요 지시사항]
- **실시간 검색 필수**: Google Search 툴을 **반드시** 사용하여 '핵심 뉴스 주제'에 대한 **실제 최신 뉴스**를 검색해야 함.
- **신뢰할 수 있는 출처**: 검색 시, **주요 언론사**의 기사를 우선적으로 활용할 것.
- **정확한 전체 URL 명시**: 검색된 각 뉴스의 **정확한 전체 URL 주소(Full URL)**를 **반드시** 포함해야 함. URL은 클릭하면 해당 페이지로 바로 이동할 수 있어야 함.
- **허위 정보 생성 금지**: **절대로** 존재하지 않는 뉴스 기사, 제목, URL을 지어내지 말 것. 모든 분석은 검색된 실제 데이터에 기반해야 함.

[입력 정보]
- 분석 컨텍스트 (페르소나, 전략 등): ${context}
- 핵심 뉴스 주제: ${query}

[요청]
위 '매우 중요 지시사항'을 철저히 준수하여 아래 형식에 맞춰 답변을 생성할 것.

**1. 최신 축산 뉴스 분석 (검색 결과 기반)**
가. **뉴스 1**
    - **기사 제목:**
    - **전체 URL:**
    - **핵심 요약:**
나. **뉴스 2**
    - **기사 제목:**
    - **전체 URL:**
    - **핵심 요약:**
다. **뉴스 3**
    - **기사 제목:**
    - **전체 URL:**
    - **핵심 요약:**

**2. 뉴스 연계 영업 시나리오**
가. **시나리오 1 (뉴스 1 활용)**
    - **상황:**
    - **고객의 예상 문제:** (사료비, 질병, 인건비, 판로 등 다양한 Pain Point와 연계)
    - **팜스코의 해결책 제안:**
나. **시나리오 2 (뉴스 2 활용)**
    - **상황:**
    - **고객의 예상 문제:** (사료비, 질병, 인건비, 판로 등 다양한 Pain Point와 연계)
    - **팜스코의 해결책 제안:**
다. **시나리오 3 (뉴스 3 활용)**
    - **상황:**
    - **고객의 예상 문제:** (사료비, 질병, 인건비, 판로 등 다양한 Pain Point와 연계)
    - **팜스코의 해결책 제안:**`;
                generateContent(prompt, 'AI 최신 뉴스 연계 시나리오', 'm4', true);
            });


            // M5 Event Listener
            document.getElementById('swot-generator-btn').addEventListener('click', () => {
                const inputs = {
                    context: document.getElementById('m5-context-input').value,
                    competitorName: document.getElementById('m5-competitor-name').value,
                    farmscoStrength: document.getElementById('m5-farmsco-strength').value,
                    farmscoWeakness: document.getElementById('m5-farmsco-weakness').value
                };
                if (Object.values(inputs).some(val => !val)) {
                    alert("모든 항목을 입력해야 함."); return;
                }
                const prompt = `${basePromptInstruction}

[매우 중요 지시사항]
- **실시간 검색 필수**: Google Search 툴을 **반드시** 사용하여 대한민국 축산 시장의 거시 환경(정치 P, 경제 E, 사회 S, 기술 T)에 대한 **실제 최신 정보**를 검색해야 함.
- **신뢰할 수 있는 출처**: 검색 시, **주요 언론사 뉴스, 정부 기관 보고서, 컨설팅펌(예: 딜로이트) 리포트, 축산 관련 전문 보고서** 등 신뢰할 수 있는 출처를 우선적으로 활용할 것.
- **정확한 전체 URL 명시**: 외부 환경 요인(기회, 위협)을 도출할 때, 근거가 된 **모든 자료의 전체 URL 주소(Full URL)**를 '근거/출처' 항목에 **반드시** 명시해야 함. URL은 클릭하면 해당 페이지로 바로 이동할 수 있어야 함.
- **허위 정보 생성 금지**: **절대로** 존재하지 않는 외부 환경 요인이나 출처(URL)를 지어내지 말 것. 모든 분석은 검색된 실제 데이터에 기반해야 함.

[입력 정보]
- 분석 컨텍스트 (M1-M4): ${inputs.context}
- 경쟁사: ${inputs.competitorName}
- 경쟁사 대비 팜스코 강점: ${inputs.farmscoStrength}
- 경쟁사 대비 팜스코 약점: ${inputs.farmscoWeakness}

[요청]
위 '매우 중요 지시사항'을 철저히 준수하여 아래 형식에 맞춰 답변을 생성할 것.

**1. 외부 환경(PEST) 분석 (검색 결과 기반)**
- **Opportunity (기회 요인)**: (최소 2개 이상 분석)
  가. 기회 1:
    - 내용: 
    - 근거/출처: 
  나. 기회 2:
    - 내용: 
    - 근거/출처: 
- **Threat (위협 요인)**: (최소 2개 이상 분석)
  가. 위협 1:
    - 내용: 
    - 근거/출처: 
  나. 위협 2:
    - 내용: 
    - 근거/출처: 

**2. TOWS 교차 분석을 통한 전략 과제 도출**
가. **SO (강점-기회) 전략**: (최소 3가지)
    - 
나. **ST (강점-위협) 전략**: (최소 3가지)
    - 
다. **WO (약점-기회) 전략**: (최소 3가지)
    - 
라. **WT (약점-위협) 전략**: (최소 3가지)
    - 

**3. 전략 과제 평가 및 우선순위 선정**
- (도출된 모든 전략 과제 리스트업)
- **과제 1**: (전략 내용) - 평가: (중요도/긴급도/실행가능도) - 총점:
- **과제 2**: ...

**4. 최우선 실행 과제**
- **1순위 과제**: 
- **선정 이유**: (총점 및 전략적 중요도 기반)
- **2순위 과제**: 
- **선정 이유**: `;
                generateContent(prompt, 'AI 외부 환경 분석 및 SWOT 과제', 'm5', true);
            });

            // M6 Event Listener
            document.getElementById('spin-script-generator-btn').addEventListener('click', () => {
                const summary = document.getElementById('m6-summary-input').value;
                if (!summary) {
                    alert("M1~M5의 요약 내용을 입력해야 함."); return;
                }
                const prompt = `${basePromptInstruction}

[매우 중요 지시사항]
- **출력 형식 및 문체 엄수**: 답변을 **'1. 상담 배경 및 전략 설정'**과 **'2. 실전 대화 SCRIPT'** 두 부분으로 명확히 나누어 작성할 것.
  - '1. 상담 배경 및 전략 설정' 부분의 모든 문장은 **'~함', '~체', 또는 명사형으로 간결하게 끝낼 것.**
  - '2. 실전 대화 SCRIPT' 부분의 모든 대화문은 **실제 대화처럼 자연스럽고 정중한 '~입니다', '~습니다' 체를 사용할 것.**
- **배경 분석**: '상담 배경 및 전략 설정' 부분에서는 입력된 종합 정보를 심층 분석하여 미팅의 목표, 핵심 공략 포인트, SPIN 단계별 공략 요인, 전체 대화 흐름 전략을 구체적으로 제시할 것.
- **실제 대화 형식**: '실전 대화 SCRIPT' 부분은 **오직 '영업사원:'과 '고객:'의 대화로만 구성**할 것. 스크립트 중간에 상황 설명이나 지문을 넣지 말 것.
- **전략적 질문 배치**: SPIN 기법의 각 단계에 해당하는 질문을 대화 속에 자연스럽게 녹여낼 것.

[입력 정보]
- 1-5단계 종합 정보: ${summary}

[요청]
위 '매우 중요 지시사항'과 '입력 정보'를 종합적으로 분석하여, 타겟 고객과의 첫 미팅을 성공으로 이끄는 **실전 대화 스크립트**를 아래 형식에 맞춰 작성할 것.

**1. 상담 배경 및 전략 설정**
가. **미팅 목표**: 
나. **SPIN 단계별 공략 요인**:
   - Situation 단계: (파악할 핵심 현황 요인들)
   - Problem 단계: (건드려야 할 예상 문제점 - 페인포인트 연결)
   - Implication 단계: (부각시켜야 할 문제의 파급 효과)
   - Need-payoff 단계: (제시할 핵심 혜택 및 솔루션)
다. **대화 흐름 전략**: (M4의 시나리오를 활용하여 상담을 시작하고, SPIN 질문으로 자연스럽게 니즈를 이끌어내는 전체 흐름 요약)

**2. 실전 대화 SCRIPT**
영업사원: 
고객: 
(이하 대화 형식으로 스크립트 구성)
`;
                generateContent(prompt, 'AI SPIN 셀링 스크립트', 'm6');
            });

             // M6 Objection Handler
            document.getElementById('objection-handler-btn').addEventListener('click', () => {
                const summary = document.getElementById('m6-summary-input').value;
                const objection = document.getElementById('m6-objection-input').value;
                if (!summary || !objection) {
                    alert("M1~M5 요약 내용과 예상 거절/반론을 모두 입력해야 함."); return;
                }
                const prompt = `${basePromptInstruction}

[매우 중요 지시사항]
- 모든 답변은 **실제 대화처럼 자연스럽고 정중한 '~입니다', '~습니다' 체**를 사용할 것.
- 단순히 답변만 나열하지 말고, 고객의 감정을 먼저 인정하고 공감하는 표현을 포함할 것.
- 제안하는 답변은 최소 3가지 이상이어야 하며, 각각 다른 접근 방식을 보여줄 것.

[입력 정보]
- 상담 전체 컨텍스트: ${summary}
- 고객의 거절/반론: "${objection}"

[요청]
위 '입력 정보'를 바탕으로, 고객의 거절/반론에 대해 팜스코 영업사원이 대처할 수 있는 설득력 있는 답변을 3가지 이상 제시할 것.`;
                 generateContent(prompt, `'${objection}'에 대한 AI 답변`, 'm6_objection');
            });
            
             // M7 Event Listener
            document.getElementById('report-generator-btn').addEventListener('click', () => {
                const outputContainer = document.getElementById('report-output');
                let hasResults = false;
                for (let i = 1; i <= 6; i++) {
                    const key = `m${i}`;
                    const el = document.getElementById(`report-${key}`);
                    if (el && moduleResults[key]) {
                        el.innerText = moduleResults[key];
                        hasResults = true;
                    } else if (el) {
                        el.innerText = "아직 생성된 결과가 없습니다.";
                    }
                }
                if (hasResults) {
                    outputContainer.classList.remove('hidden');
                } else {
                    alert("하나 이상의 모듈에서 분석을 먼저 진행해주세요.");
                }
            });

             document.getElementById('print-report-btn').addEventListener('click', () => {
                const reportContent = document.getElementById('report-output');
                if (reportContent.classList.contains('hidden')) {
                    alert('먼저 "종합 리포트 생성하기" 버튼을 클릭하여 리포트를 생성해주세요.');
                    return;
                }
                window.print();
            });

        });
    </script>
</body>
</html>

